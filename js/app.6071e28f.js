(function(){"use strict";var e={6671:function(e,t,s){var o=s(6369),a=function(){var e=this,t=e._self._c;return t("div",[t(e.layoutComponent,{tag:"component"})],1)},i=[],r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"start-page"},[t("HeaderApp"),t("RouterView")],1)},n=[],c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("header",{staticClass:"header"},[t("img",{staticClass:"header__logo",class:{header__logo_mobile:e.isUserAuth},attrs:{src:s(9574),alt:"logo"}}),e.isUserAuth?t("div",{staticClass:"header__user"},[t("div",{staticClass:"header__email"},[e._v(e._s(e.getUserEmail))]),t("img",{staticClass:"header__user-icon",attrs:{src:s(8129),alt:"user-icon"},on:{click:e.popUpToggle}}),t("div",{staticClass:"header__pop-up",class:{"header__pop-up_active":e.showPopUp}},[t("div",{staticClass:"header__pop-up-body",on:{click:e.logOut}},[e._v(" Выйти ")])])]):t("div",{staticClass:"header__left btn",on:{click:e.openModal}},[t("img",{attrs:{src:s(560),alt:"logo"}}),t("div",[e._v("Вход")])]),e.showPopUp?t("div",{staticClass:"header__pop-up-bg",on:{click:e.popUpToggle}}):e._e(),t("LoginAndSignUp",{attrs:{openSignDialog:e.openSignDialog},on:{"close-dialog":e.closeSignDialog}})],1)},l=[],d=(s(3159),s(3822)),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"dialog",class:{dialog_active:e.openSignDialog}},[e.openSignDialog?t("div",{staticClass:"dialog__block"},[t("button",{staticClass:"dialog__close-btn btn",on:{click:e.closeDialog}}),t("h2",{staticClass:"dialog__title"},[e._v(e._s(e.isLoginDialog?"Вход в ваш аккаунт":"Регистрация"))]),t("div",{staticClass:"dialog__label"},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"dialog__input input",attrs:{placeholder:"Введите значение",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("div",{staticClass:"dialog__password"},[t("div",{staticClass:"dialog__label"},[e._v("Пароль")]),"checkbox"===(e.isPasswordVisible?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"dialog__input input",attrs:{placeholder:"Введите пароль",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{change:function(t){var s=e.password,o=t.target,a=!!o.checked;if(Array.isArray(s)){var i=null,r=e._i(s,i);o.checked?r<0&&(e.password=s.concat([i])):r>-1&&(e.password=s.slice(0,r).concat(s.slice(r+1)))}else e.password=a}}}):"radio"===(e.isPasswordVisible?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"dialog__input input",attrs:{placeholder:"Введите пароль",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{change:function(t){e.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"dialog__input input",attrs:{placeholder:"Введите пароль",type:e.isPasswordVisible?"text":"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("img",{staticClass:"input__password-icon",attrs:{src:e.passwordIcon,alt:"Password visibility icon"},on:{click:e.setPasswordVisibility}})]),e.isLoginDialog?e._e():t("div",{staticClass:"dialog__password"},[t("div",{staticClass:"dialog__label"},[e._v("Пароль ещё раз")]),"checkbox"===(e.isConfirmPasswordVisible?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"dialog__input input",attrs:{placeholder:"Повторите пароль",type:"checkbox"},domProps:{checked:Array.isArray(e.confirmPassword)?e._i(e.confirmPassword,null)>-1:e.confirmPassword},on:{change:function(t){var s=e.confirmPassword,o=t.target,a=!!o.checked;if(Array.isArray(s)){var i=null,r=e._i(s,i);o.checked?r<0&&(e.confirmPassword=s.concat([i])):r>-1&&(e.confirmPassword=s.slice(0,r).concat(s.slice(r+1)))}else e.confirmPassword=a}}}):"radio"===(e.isConfirmPasswordVisible?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"dialog__input input",attrs:{placeholder:"Повторите пароль",type:"radio"},domProps:{checked:e._q(e.confirmPassword,null)},on:{change:function(t){e.confirmPassword=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"dialog__input input",attrs:{placeholder:"Повторите пароль",type:e.isConfirmPasswordVisible?"text":"password"},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}}),t("img",{staticClass:"input__password-icon",attrs:{src:e.repeatPasswordIcon,alt:"Password visibility icon"},on:{click:e.setRepeatPasswordVisibility}})]),t("div",{staticClass:"dialog__text"},[t("div",[e._v(" "+e._s(e.isLoginDialog?"У вас нет аккаунта?":"У вас есть аккаунт?")+" "),t("span",{staticClass:"dialog__action",on:{click:e.toggleSignUpAndSignIn}},[e._v(" "+e._s(e.isLoginDialog?"Зарегистрируйтесь":"Войдите")+" ")])]),t("button",{staticClass:"dialog__enter btn",on:{click:()=>e.isLoginDialog?e.signIn():e.signUp()}},[e._v(" "+e._s(e.isLoginDialog?"Войти":"Зарегистрироваться")+" ")])]),e.getErrorMessage?t("div",{staticClass:"dialog__error"},[e._v(" "+e._s(e.getErrorMessage))]):e._e()]):e._e()])},p=[],g=(0,o.aZ)({name:"loginAndSignUp",props:["openSignDialog"],data(){return{isPasswordVisible:!1,isConfirmPasswordVisible:!1,isLoginDialog:!0,email:void 0,password:void 0,confirmPassword:void 0}},methods:{closeDialog(){this.$emit("close-dialog")},setPasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible},setRepeatPasswordVisibility(){this.isConfirmPasswordVisible=!this.isConfirmPasswordVisible},toggleSignUpAndSignIn(){this.isLoginDialog=!this.isLoginDialog},async signUp(){try{const e=await this.$store.dispatch("authStore/signUp",{email:this.email,password:this.password,confirm_password:this.confirmPassword});e.errorMessage||await this.$router.push("/home")}catch(e){console.log(e)}},async signIn(){try{const e=await this.$store.dispatch("authStore/signIn",{email:this.email,password:this.password});e.data.accessToken&&await this.$router.push("/home")}catch(e){console.log(e)}}},computed:{...(0,d.Se)("authStore",["getErrorMessage"]),passwordIcon(){return this.isPasswordVisible?s(2992):s(5425)},repeatPasswordIcon(){return this.isConfirmPasswordVisible?s(2992):s(5425)}}}),m=g,f=s(1001),h=(0,f.Z)(m,u,p,!1,null,"232eee38",null),_=h.exports,v=(0,o.aZ)({name:"HeaderApp",components:{LoginAndSignUp:_},data(){return{openSignDialog:!1,showPopUp:!1}},computed:{...(0,d.Se)("authStore",["isUserAuth","getUserEmail"])},methods:{openModal(){this.openSignDialog=!0},closeSignDialog(){this.openSignDialog=!1},popUpToggle(){this.showPopUp=!this.showPopUp},async logOut(){try{await this.$store.dispatch("authStore/logOut"),await this.$router.push("/")}catch(e){console.log(e)}}}}),w=v,y=(0,f.Z)(w,c,l,!1,null,"391580d5",null),b=y.exports,P=(0,o.aZ)({name:"StartPage",components:{HeaderApp:b}}),S=P,E=(0,f.Z)(S,r,n,!1,null,"6c9dbe8c",null),T=E.exports,C=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-page"},[t("HeaderApp"),t("RouterView")],1)},R=[],A=(0,o.aZ)({name:"MainPage",components:{HeaderApp:b}}),k=A,x=(0,f.Z)(k,C,R,!1,null,"84fb8df6",null),O=x.exports,U={components:{StartPage:T,MainPage:O},computed:{layoutComponent(){return"auth"===this.$route.meta.layout?T:O}},async mounted(){try{localStorage.getItem("accessToken")&&await this.$store.dispatch("authStore/me")}catch(e){console.log(e)}}},N=U,D=(0,f.Z)(N,a,i,!1,null,null,null),L=D.exports,V=s(2631);o.ZP.use(V.ZP);const Z=[{path:"/",name:"AuthPage",component:async()=>s.e(236).then(s.bind(s,2236)),meta:{layout:"auth"}},{path:"/home",name:"HomePage",component:async()=>s.e(522).then(s.bind(s,6522)),meta:{layout:"default"}}],I=new V.ZP({mode:"history",base:"/",routes:Z});var M=I,j=s(1076);const H=j.Z.create({baseURL:"https://dist.nd.ru/api/"});H.interceptors.request.use((e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));var $={namespaced:!0,state(){return{isAuth:!1,errorMessage:null,userEmail:null}},getters:{isUserAuth(e){return e.isAuth},getUserEmail(e){return e.userEmail},getErrorMessage(e){return e.errorMessage}},actions:{async me({commit:e}){try{const t=await H.get("/auth");return e("SET_AUTH",!0),e("SET_EMAIL",t.data.email),t}catch(t){"string"===typeof t.response.data.message?e("SET_ERROR",t.response.data.message):e("SET_ERROR",t.response.data.message[0])}},async signUp({commit:e},t){try{const s=await j.Z.post("https://dist.nd.ru/api/reg",{...t});return e("SET_AUTH",!0),e("SET_EMAIL",s.data.email),s}catch(s){"string"===typeof s.response.data.message?e("SET_ERROR",s.response.data.message):e("SET_ERROR",s.response.data.message[0])}},async signIn({commit:e},t){try{const s=await j.Z.post("https://dist.nd.ru/api/auth",{...t});return e("SET_AUTH",!0),e("SET_EMAIL",t.email),localStorage.setItem("accessToken",s.data.accessToken),s}catch(s){"string"===typeof s.response.data.message?e("SET_ERROR",s.response.data.message):e("SET_ERROR",s.response.data.message[0])}},async logOut({commit:e}){try{await H.delete("/auth"),e("SET_AUTH",!1),localStorage.removeItem("accessToken")}catch(t){console.error(t),e("SET_ERROR",t.message)}}},mutations:{SET_AUTH(e,t){e.isAuth=t},SET_EMAIL(e,t){e.userEmail=t},SET_ERROR(e,t){e.errorMessage=t}}},q={namespaced:!0,state(){return{notes:[]}},getters:{getNotes(e){return e.notes}},actions:{async getNotes({commit:e}){try{const t=await H.get("/notes");return e("SET_NOTES",t.data),t}catch(t){"string"===typeof t.response.data.message?e("SET_ERROR",t.response.data.message):e("SET_ERROR",t.response.data.message[0])}},async createNote({commit:e},t){try{await H.post("/notes",{...t});const s=await H.get("/notes");return e("SET_NOTES",s.data),s}catch(s){"string"===typeof s.response.data.message?e("SET_ERROR",s.response.data.message):e("SET_ERROR",s.response.data.message[0])}},async deleteNote({commit:e},t){try{await H.delete(`/notes/${t}`);const s=await H.get("/notes");return e("SET_NOTES",s.data),s}catch(s){"string"===typeof s.response.data.message?e("SET_ERROR",s.response.data.message):e("SET_ERROR",s.response.data.message[0])}},setUpdatedNotes({commit:e},t){e("SET_NOTES",t)}},mutations:{SET_NOTES(e,t){e.notes=t}}};o.ZP.use(d.ZP);var B=new d.ZP.Store({modules:{authStore:$,notesStore:q}});o.ZP.config.productionTip=!1,new o.ZP({router:M,store:B,render:e=>e(L)}).$mount("#app")},560:function(e,t,s){e.exports=s.p+"img/header__icon.03c06e88.svg"},8129:function(e,t,s){e.exports=s.p+"img/header_user-icon.42bdb5d4.svg"},2992:function(e,t,s){e.exports=s.p+"img/input-hide.6a592bc1.svg"},5425:function(e,t,s){e.exports=s.p+"img/input-visible.6814fd08.svg"},9574:function(e,t,s){e.exports=s.p+"img/logo.c30495fa.svg"}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,i){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],i=e[d][2];for(var n=!0,c=0;c<o.length;c++)(!1&i||r>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[c])}))?o.splice(c--,1):(n=!1,i<r&&(r=i));if(n){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,a,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,o){return s.f[o](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{236:"0965e1ba",522:"95b39ad1"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"css/"+e+"."+{236:"7e7cb350",522:"1b1bd38e"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue2-notes:";s.l=function(o,a,i,r){if(e[o])e[o].push(a);else{var n,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+i){n=u;break}}n||(c=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+i),n.src=o),e[o]=[a];var p=function(t,s){n.onerror=n.onload=null,clearTimeout(g);var a=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((function(e){return e(s)})),t)return t(s)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),c&&document.head.appendChild(n)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,o,a){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(s){if(i.onerror=i.onload=null,"load"===s.type)o();else{var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=n,i.parentNode&&i.parentNode.removeChild(i),a(c)}};return i.onerror=i.onload=r,i.href=t,s?s.parentNode.insertBefore(i,s.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var a=s[o],i=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){a=r[o],i=a.getAttribute("data-href");if(i===e||i===t)return a}},o=function(o){return new Promise((function(a,i){var r=s.miniCssF(o),n=s.p+r;if(t(r,n))return a();e(o,n,null,a,i)}))},a={143:0};s.f.miniCss=function(e,t){var s={236:1,522:1};a[e]?t.push(a[e]):0!==a[e]&&s[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={143:0};s.f.j=function(t,o){var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var i=new Promise((function(s,o){a=e[t]=[s,o]}));o.push(a[2]=i);var r=s.p+s.u(t),n=new Error,c=function(o){if(s.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",n.name="ChunkLoadError",n.type=i,n.request=r,a[1](n)}};s.l(r,c,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,r=o[0],n=o[1],c=o[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(c)var d=c(s)}for(t&&t(o);l<r.length;l++)i=r[l],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},o=self["webpackChunkvue2_notes"]=self["webpackChunkvue2_notes"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(6671)}));o=s.O(o)})();
//# sourceMappingURL=app.6071e28f.js.map