"use strict";(self["webpackChunkvue2_notes"]=self["webpackChunkvue2_notes"]||[]).push([[522],{6522:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"home"},[t._l(t.getNotes,(function(t){return e("NoteItem",{key:t.id,attrs:{note:t}})})),e("AddNoteDialog",{attrs:{isAddNoteModalOpen:t.isAddNoteModalOpen},on:{"close-modal":t.closeModal}}),e("button",{staticClass:"home__add-note btn",on:{click:t.openModal}})],2)},a=[],i=s(6369),r=s(3822),n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"note__item",attrs:{draggable:"true"},on:{dragstart:function(e){return t.dragStart(e,t.note.id)},drop:function(e){return e.preventDefault(),t.drop(e,t.note.id)},dragover:function(e){return e.preventDefault(),t.dragover(e)},dragleave:function(e){return t.dragleave(e)}}},[t._m(0),e("h4",{staticClass:"note__title"},[t._v(" "+t._s(t.note.title))]),e("div",{staticClass:"note__content"},[t._v(" "+t._s(t.note.content))]),e("div",{staticClass:"note__bottom",on:{click:function(e){return t.deleteNote(t.note.id)}}},[e("button",{staticClass:"note__delete"},[t._v("Удалить")])])])},l=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"note__corner"},[e("div",{staticClass:"note__triangle"})])}],d=(0,i.aZ)({name:"NoteItem",props:["note"],computed:{...(0,r.Se)("notesStore",["getNotes"])},methods:{async deleteNote(t){try{await this.$store.dispatch("notesStore/deleteNote",t)}catch(e){console.log(e)}},dragStart(t,e){t.dataTransfer.setData("draggableItemId",e)},drop(t,e){const s=+t.dataTransfer.getData("draggableItemId"),o=this.getNotes.findIndex((t=>t.id===s)),a=this.getNotes.findIndex((t=>t.id===e)),i=this.getNotes.find((t=>t.id===s)),r=[...this.getNotes];r.splice(o,1),r.splice(a,0,i),document.querySelectorAll(".note__item").forEach((t=>{t.classList.remove("note__item_dragover")})),this.$store.dispatch("notesStore/setUpdatedNotes",r)},dragover(t){const e=t.target.closest(".note__item");e.classList.add("note__item_dragover")},dragleave(t){const e=t.target.closest(".note__item");e.classList.remove("note__item_dragover")}}}),c=d,_=s(1001),g=(0,_.Z)(c,n,l,!1,null,"5dcfcb10",null),u=g.exports,v=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"add-note",class:{"add-note__active":t.isAddNoteModalOpen}},[e("div",{staticClass:"add-note__block"},[e("button",{staticClass:"dialog__close-btn btn",on:{click:t.closeAddNoteModal}}),e("h2",{staticClass:"dialog__title"},[t._v("Добавление заметки")]),e("div",{staticClass:"dialog__label"},[t._v("Название заметки")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"dialog__input input",domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),e("div",{staticClass:"dialog__info"},[e("div",{staticClass:"dialog__error"},[t._v(" "+t._s(t.titleErrorMessage))]),e("div",{staticClass:"dialog__length"},[t._v(" "+t._s(t.title.length)+"/100")])]),e("div",{staticClass:"dialog__label"},[t._v("Текст заметки")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"dialog__textarea input",domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),e("div",{staticClass:"dialog__info"},[e("div",{staticClass:"dialog__error"},[t._v(" "+t._s(t.textErrorMessage))]),e("div",{staticClass:"dialog__length"},[t._v(" "+t._s(t.text.length)+"/250")])]),e("div",{staticClass:"dialog__wrapper"},[e("button",{staticClass:"dialog__create-btn btn",on:{click:t.createNote}},[t._v("Добавить")])])])]),e("div",{staticClass:"snackBar",class:{snackBar_active:t.showErrorMessage}},[t._v(" "+t._s(t.errorMessage))])])},h=[],m=(0,i.aZ)({name:"AddNoteDialog",props:["isAddNoteModalOpen"],data(){return{title:"",text:"",errorMessage:"",timerId:void 0}},methods:{closeAddNoteModal(){this.$emit("close-modal"),this.title="",this.text=""},async createNote(){await clearTimeout(this.timerId),this.errorMessage="",setTimeout((async()=>{if(this.titleErrorMessage||this.textErrorMessage)return this.errorMessage="Необходимо проверить введенные данные",void(this.timerId=setTimeout((()=>this.errorMessage=""),3e3));if(!this.title||!this.text)return this.errorMessage="Необходимо заполнить все поля",void(this.timerId=setTimeout((()=>this.errorMessage=""),3e3));try{await this.$store.dispatch("notesStore/createNote",{title:this.title,content:this.text}),this.closeAddNoteModal()}catch(t){console.log(t)}}),100)}},computed:{titleErrorMessage(){return this.title.length>100?"Максимальная длина - 100 символов":""},textErrorMessage(){return this.text.length>250?"Максимальная длина - 250 символов":""},showErrorMessage(){return this.errorMessage.length>0}}}),p=m,f=(0,_.Z)(p,v,h,!1,null,"bea44ad0",null),N=f.exports,M=(0,i.aZ)({name:"HomePage",components:{AddNoteDialog:N,NoteItem:u},async mounted(){try{await this.$store.dispatch("notesStore/getNotes")}catch(t){console.log(t)}},computed:{...(0,r.Se)("notesStore",["getNotes"])},data(){return{isAddNoteModalOpen:!1}},methods:{closeModal(){this.isAddNoteModalOpen=!1},openModal(){this.isAddNoteModalOpen=!0}}}),C=M,x=(0,_.Z)(C,o,a,!1,null,"776bbb7d",null),b=x.exports}}]);
//# sourceMappingURL=522.95b39ad1.js.map